{{#partial "head"}}
    {{{ stylesheet '/assets/css/invoice.css' }}}
{{/partial}}

{{#partial "page"}}
    <div>
        <h1>
            {{#if settings.store_logo.image}}
                {{#if theme_settings.logo_size '===' 'original'}}
                    <img src="{{getImage settings.store_logo.image 'logo_size'}}" alt="{{settings.store_logo.title}}" title="{{settings.store_logo.title}}">
                {{else}}
                    <div>
                        <img data-sizes="auto" src="{{getImage settings.store_logo.image 'logo_size'}}" alt="{{settings.store_logo.title}}" title="{{settings.store_logo.title}}">
                    </div>
                {{/if}}
            {{else}}
                <span>{{settings.store_logo.title}}</span>
            {{/if}}
        </h1>
        <div>
            {{lang 'invoice.for_order' name=settings.store_name id=order.id}}
        </div>

        <address><strong>{{nl2br settings.address}}</strong></address>

        <div>
            <div>
                <h3>{{lang 'account.orders.details.bill_to'}}</h3>
                <ul>
                    <li><strong>{{order.billing_address.full_name}}</strong></li>
                    <li>{{order.billing_address.company}}</li>
                    <li>{{order.billing_address.address_lines.[0]}}</li>
                    <li>{{order.billing_address.address_lines.[1]}}</li>
                    <li>{{order.billing_address.city}}, {{order.billing_address.state}} {{order.billing_address.zip}}</li>
                    <li>{{order.billing_address.country}}</li>
                    <li>&nbsp;</li>
                    <li>{{lang 'invoice.phone' number=order.billing_address.phone}}</li>
                    {{#if order.billing_address.email}}<li>{{lang 'invoice.email' email=order.billing_address.email}}</li>{{/if}}
                </ul>
            </div>
            {{#if order.shipping_address}}
                {{#unless order.has_multiple_shipping_addresses}}
                    <div>
                        <h3>{{lang 'account.orders.details.ship_to'}}</h3>
                        <ul>
                            <li><strong>{{order.shipping_address.full_name}}</strong></li>
                            <li>{{order.shipping_address.company}}</li>
                            <li>{{order.shipping_address.address_lines.[0]}}</li>
                            <li>{{order.shipping_address.address_lines.[1]}}</li>
                            <li>{{order.shipping_address.city}}, {{order.shipping_address.state}} {{order.shipping_address.zip}}</li>
                            <li>{{order.shipping_address.country}}</li>
                            <li>&nbsp;</li>
                            <li>{{lang 'invoice.phone' number=order.shipping_address.phone}}</li>
                            {{#if order.shipping_address.email}}<li>{{lang 'invoice.email' email=order.shipping_address.email}}</li>{{/if}}
                        </ul>
                    </div>
                {{/unless}}
            {{/if}}
        </div>

        <div>
            <div>
                <div>
                    <div>{{lang 'invoice.order'}}</div>
                    <div>#{{order.id}}</div>
                </div>
                <div>
                    <div>{{lang 'invoice.payment_method'}}</div>
                    <div>{{order.payment_method}} ({{order.total.formatted}})</div>
                </div>
            </div>
            <div>
                <div>
                    <div>{{lang 'invoice.order_date'}}</div>
                    <div>{{order.date}}</div>
                </div>
                {{#if order.shipping_method}}
                    <div>
                        <div>{{lang 'invoice.shipping_method'}}</div>
                        <div>{{order.shipping_method}}</div>
                    </div>
                {{/if}}
            </div>
        </div>

        <div>
            <h2>{{lang 'invoice.order_items'}}</h2>
            <table>
                <thead>
                <tr>
                    {{#if order.has_multiple_shipping_addresses}}
                        <th>{{lang 'invoice.shipping_address'}}</th>
                    {{/if}}
                    <th>{{lang 'invoice.qty'}}</th>
                    <th>{{lang 'invoice.code'}}</th>
                    <th>{{lang 'invoice.product_name'}}</th>
                    <th align="right">{{lang 'invoice.price'}}</th>
                    <th align="right">{{lang 'invoice.total'}}</th>
                </tr>
                </thead>
                <tbody>
                {{#each order.items}}
                    <tr>
                        {{#if ../order.has_multiple_shipping_addresses}}
                            <td>
                                {{#each shipping_rows}}
                                    <div>{{address}}</div>
                                    <div>{{city}}, {{state}} {{zip}}</div>
                                    <div>{{country}}</div>
                                {{/each}}
                            </td>
                        {{/if}}
                        <td>{{quantity}}</td>
                        <td>{{sku}}</td>
                        <td>
                            {{name}}
                            <div>

                                {{#each options}}
                                    <div>
                                        <div>{{name}}:</div>
                                        <div></div>
                                        <div>{{{sanitize value}}}</div>
                                    </div>
                                {{/each}}
                            </div>
                            <div>
                                {{#each customizations}}
                                    <div>
                                        <div>{{name}}:</div>
                                        <div></div>
                                        <div>{{value}}</div>
                                    </div>
                                {{/each}}
                            </div>
                            {{#if gift_wrapping_name}}
                                <div>
                                    {{gift_wrapping_name}}
                                </div>
                            {{/if}}
                            {{#if event_date}}
                                <div>
                                    <div>
                                        <div>{{event_date.name}}:</div>
                                        <div></div>
                                        <div>{{event_date.date}}</div>
                                    </div>
                                </div>
                            {{/if}}
                            {{#if pre_ordered}}
                                <div>
                                    <div>
                                        <div>Preordered:</div>
                                        <div>{{lang 'common.yes'}}</div>
                                    </div>
                                </div>
                            {{/if}}
                        </td>
                        <td>{{price.formatted}}</td>
                        <td>{{total.formatted}}</td>
                    </tr>
                {{/each}}

                </tbody>
                <tfoot>
                {{#each order.total_rows}}
                    <tr>
                        <td colspan="{{#if ../order.has_multiple_shipping_addresses}}5{{else}}4{{/if}}">{{label}}</td>
                        <td>{{value.formatted}}</td>
                    </tr>
                {{/each}}
                </tfoot>
            </table>
            <div>
                <div>{{lang 'invoice.comments'}}</div>
                <blockquote>
                    {{order.comments}}
                </blockquote>
            </div>
        </div>
    </div>
    <script>
        window.print();
    </script>
{{/partial}}
{{> layout/empty}}
